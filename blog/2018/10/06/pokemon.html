<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Is There Gender Equality in the Pokémon Universe? · </title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="With more than 13 millions of subscribers, Reddit&#x27;s *[Data Is"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Is There Gender Equality in the Pokémon Universe? · "/><meta property="og:type" content="website"/><meta property="og:url" content="https://lgnbhl.github.io/blog/2018/10/06/pokemon"/><meta property="og:description" content="With more than 13 millions of subscribers, Reddit&#x27;s *[Data Is"/><meta property="og:image" content="https://lgnbhl.github.io/img/banner-logo-white.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://lgnbhl.github.io/img/banner-logo-white.png"/><link rel="shortcut icon" href="/img/logo-black.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-dark.min.css"/><link rel="alternate" type="application/atom+xml" href="https://lgnbhl.github.io/blog/atom.xml" title=" Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://lgnbhl.github.io/blog/feed.xml" title=" Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/banner-logo-white.png" alt=""/><h2 class="headerTitleWithLogo"></h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/./" target="_self">Home</a></li><li class="siteNavGroupActive"><a href="/blog/" target="_self">Blog</a></li><li class=""><a href="/about" target="_self">About</a></li><li class=""><a href="/#contact" target="_self">Contact</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Recent Posts</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Recent Posts</h3><ul class=""><li class="navListItem"><a class="navItem" href="/blog/2019/12/16/leaflet-map">Most Recurring Word on each Country&#x27;s Wikipedia Page</a></li><li class="navListItem"><a class="navItem" href="/blog/2019/11/07/swiss-data">Introducing my new R package {BFS}</a></li><li class="navListItem"><a class="navItem" href="/blog/2019/04/07/shdi">The Evolution of Regional Inequalities Around the World</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/blog/2018/10/06/pokemon">Is There Gender Equality in the Pokémon Universe?</a></li><li class="navListItem"><a class="navItem" href="/blog/2018/07/27/meetup">Slides of my Talk at the R Users Meetup Geneva</a></li><li class="navListItem"><a class="navItem" href="/blog/2018/06/30/cooking">Can you Guess a Cuisine from its Ingredients?</a></li><li class="navListItem"><a class="navItem" href="/blog/2018/06/05/mapping">Reproducing The Economist Most Popular Map of 2017</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer postContainer blogContainer"><div class="wrapper"><div class="lonePost"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"><a href="/blog/2018/10/06/pokemon">Is There Gender Equality in the Pokémon Universe?</a></h1><p class="post-meta">October 6, 2018</p><div class="authorBlock"></div></header><div><span><p><img src="/dataisbeautiful/pokemon_genders.png" alt=""></p>
<p>With more than 13 millions of subscribers, Reddit's <em><a href="https://www.reddit.com/r/dataisbeautiful/comments/9cuzs3/battle_dataviz_battle_for_the_month_of_september/">Data Is
Beautiful</a></em> is one of the main online forum on data visualization. Last week I came accross the funny dataset of the current DataViz
monthly challenge: <a href="https://www.kaggle.com/rounakbanik/pokemon">Information on All 802
Pokemon</a>. Having a quick
look at the data, I discovered with surprize a
<code>percentage_male</code> variable. I wasn’t aware that Pokémon have genders. So
I decided to dig further into this gender dimension of the Pokémon
universe.</p>
<!--truncate-->
<p>I learnt that since the 2nd generation, Pokémon could either be male
or female. For example, when a little Pikachu get out of its egg, he has
50% percent of being male (and 50% of being female). Some Pokémons have
more chances to be male, some to be female and some have no genders (as
I always thought). Take
<a href="https://en.wikipedia.org/wiki/Squirtle">Squirtle</a> for example.
According to the dataset, he has 88.1% of chances to be male. Squirtle
is therefore a male Pokémon.</p>
<p>This surprise led me to ask a simple question: <strong>is there gender
equality in the Pokémon universe?</strong></p>
<h2><a class="anchor" aria-hidden="true" id="catch-em-all"></a><a href="#catch-em-all" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Catch ’Em All</h2>
<p>Firstly, let’s get the data and classify the Pokémon according to their more probable gender.</p>
<p><details markdown="1"><summary><span class="btn btn--inverse">Show code</span></summary></p>
<pre><code class="hljs css language-r"><span class="hljs-keyword">library</span>(tidyverse)
<span class="hljs-keyword">library</span>(DT)

pokemon &lt;- read_csv(<span class="hljs-string">"input/pokemon.csv"</span>) <span class="hljs-comment">#data from https://www.kaggle.com/rounakbanik/pokemon</span>

pokemon_gender &lt;- pokemon %&gt;%
  select(percentage_male, generation, name) %&gt;%
  mutate(gender = case_when(percentage_male == <span class="hljs-number">0.0</span> ~ <span class="hljs-string">"Pokémon more likely to be FEMALE"</span>,
                            percentage_male == <span class="hljs-number">11.2</span> ~ <span class="hljs-string">"Pokémon more likely to be FEMALE"</span>,
                            percentage_male == <span class="hljs-number">24.6</span> ~ <span class="hljs-string">"Pokémon more likely to be FEMALE"</span>,
                            percentage_male == <span class="hljs-number">50.0</span> ~ <span class="hljs-string">"Pokémon with equal likelihood of being FEMALE OR MALE"</span>,
                            percentage_male == <span class="hljs-number">75.4</span> ~ <span class="hljs-string">"Pokémon more likely to be MALE"</span>,
                            percentage_male == <span class="hljs-number">88.1</span> ~ <span class="hljs-string">"Pokémon more likely to be MALE"</span>,
                            percentage_male == <span class="hljs-number">100.0</span> ~ <span class="hljs-string">"Pokémon more likely to be MALE"</span>),
         gender = replace_na(gender, <span class="hljs-string">"Pokémon with NO GENDER"</span>), <span class="hljs-comment">#NA is for genderless</span>
         generation = case_when(generation == <span class="hljs-number">1</span> ~ <span class="hljs-string">"from Generation I"</span>,
                                generation == <span class="hljs-number">2</span> ~ <span class="hljs-string">"from Generation II"</span>,
                                generation == <span class="hljs-number">3</span> ~ <span class="hljs-string">"from Generation III"</span>,
                                generation == <span class="hljs-number">4</span> ~ <span class="hljs-string">"from Generation IV"</span>,
                                generation == <span class="hljs-number">5</span> ~ <span class="hljs-string">"from Generation V"</span>,
                                generation == <span class="hljs-number">6</span> ~ <span class="hljs-string">"from Generation VI"</span>,
                                generation == <span class="hljs-number">7</span> ~ <span class="hljs-string">"from Generation VII"</span>)) %&gt;%
  count(gender, generation, name) <span class="hljs-comment">#mutate(n = 1) would also work</span>

datatable(select(pokemon_gender, name, generation, gender), rownames = <span class="hljs-literal">FALSE</span>, 
          options = list(pageLength = <span class="hljs-number">5</span>, dom = <span class="hljs-string">'ftpi'</span>))
</code></pre>
<p></details></p>
<iframe seamless src="/img/dt_pokemon.html" width="100%" height="450" frameborder="0"></iframe>
<h2><a class="anchor" aria-hidden="true" id="visualize-em-all"></a><a href="#visualize-em-all" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Visualize ’Em all</h2>
<p>A simple treemap allows us to visualize our hierarchical dataset.</p>
<p><details markdown="1"><summary><span class="btn btn--inverse">Show code</span></summary></p>
<pre><code class="hljs css language-r"><span class="hljs-keyword">library</span>(treemap)

pokemon_tm &lt;- treemap(pokemon_gender,
                      index = c(<span class="hljs-string">"gender"</span>, <span class="hljs-string">"generation"</span>, <span class="hljs-string">"name"</span>),
                      vSize = <span class="hljs-string">"n"</span>,
                      palette = <span class="hljs-string">"Pastel1"</span>,
                      title = <span class="hljs-string">"Pokémon Genders over the Generations"</span>)
</code></pre>
<p></details></p>
<p><img src="/img/chart_pokemon.png" alt=""></p>
<p>Looks like gender imbalance to me. The <code>Pokémon more likely to be FEMALE</code> cell is less than half the size of the <code>Pokémon more likely to be MALE</code> cell.</p>
<p>The <code>sunburstR</code> package, a htmlwidget to create d3.js sequence
sunbursts, allows us to better explore the Pokémon gender repartition
over the generations.</p>
<p>We get a simple but effective interactive visualization, which I published online using <code>flexdashboard</code>. Note that some modification have to be made manually inside the HTML output.</p>
<p>Click on the image to open the interactive page.</p>
<p><details markdown="1"><summary><span class="btn btn--inverse">Show code</span></summary></p>
<pre><code class="hljs css language-r"><span class="hljs-keyword">library</span>(sunburstR)
<span class="hljs-keyword">library</span>(d3r)
<span class="hljs-keyword">library</span>(htmlwidgets)

pokemon_tm_nest &lt;- d3_nest(
  pokemon_tm$tm[,c(<span class="hljs-string">"gender"</span>, <span class="hljs-string">"generation"</span>, <span class="hljs-string">"name"</span>, <span class="hljs-string">"vSize"</span>, <span class="hljs-string">"color"</span>)],
  value_cols = c(<span class="hljs-string">"vSize"</span>, <span class="hljs-string">"color"</span>)
  )

sb &lt;- sunburst(
  data = pokemon_tm_nest,
  valueField = <span class="hljs-string">"vSize"</span>,
  legend = list(w = <span class="hljs-number">400</span>),
  legendOrder = c(<span class="hljs-string">"Pokémon more likely to be FEMALE"</span>, 
                  <span class="hljs-string">"Pokémon more likely to be MALE"</span>, 
                  <span class="hljs-string">"Pokémon with equal likelihood of being FEMALE OR MALE"</span>,
                  <span class="hljs-string">"Pokémon with NO GENDER"</span>),
  count = <span class="hljs-literal">TRUE</span>,
  sumNodes = <span class="hljs-literal">FALSE</span>,
  colors = htmlwidgets::JS(<span class="hljs-string">"function(d){return d3.select(this).datum().data.color;}"</span>),
  withD3 = <span class="hljs-literal">TRUE</span>)

sb &lt;- htmlwidgets::onRender(sb,
  <span class="hljs-comment">#ref: https://github.com/timelyportfolio/sunburstR/issues/15</span>
  <span class="hljs-string">"function(el,x){
  // have legend as default
    d3.select(el).select('.sunburst-togglelegend').property('checked', true);
    d3.select(el).select('.sunburst-legend').style('visibility', '');
  }"</span>
  )
</code></pre>
<pre><code class="hljs css language-js">## code to copy past into the equivalent html output

// Fade all but the current sequence, and show it in the breadcrumb trail.
  function mouseover(d) {

    var percentage = (100 * d.value / totalSize).toPrecision(2); // precision 2 - lgnbhl mod
    var percentageString = percentage + "%";
    if (percentage &lt; 0.13) { // conditionality added
      percentageString = "";
    }

    var countString = [
        '&lt;span style = "font-size:.7em"&gt;',
        d3Format.format("1.2s")(d.value) + ' Pokémon on 801', // on 801 Pokémon
        '&lt;/span&gt;'
      ].join('');
    if (percentage &lt; 0.13) { // conditionality added
      countString = d.data.name;
    }
</code></pre>
<p></details></p>
<p><a href="https://lgnbhl.github.io/dataisbeautiful/pokemon_genders.html" title="Click on the image to open the interactive page"><img src="/dataisbeautiful/pokemon_genders.png" alt=""></a></p>
<p><h4>Thanks for reading!</h4></p>
<ul>
<li>For updates of recent blog posts, follow me on <a href="https://twitter.com/FelixLuginbuhl">Twitter</a>.</li>
<li>For reproducing my data analysis, go on my <a href="https://github.com/lgnbhl/blogposts">Github repo</a> or my <a href="https://mybinder.org/v2/gh/lgnbhl/blogposts/master?urlpath=rstudio">RStudio server</a>.</li>
<li>Curious about what I can do for your organisation? Have a look my <a href="https://felixluginbuhl.com">services</a>.</li>
</ul>
<!-- Begin Mailchimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
    #mc_embed_signup{background:#transparent; clear:left; width:100%;}
    /* Add your own Mailchimp form style overrides in your site stylesheet or in this style block.
       We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<form action="https://protonmail.us20.list-manage.com/subscribe/post?u=76318d6fc4f4bf252f3716c14&amp;id=bf5bf4210c" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
    <label for="mce-EMAIL">Like my articles? Subscribe via e-mail.</label>
    <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="E-mail address" required>
    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_76318d6fc4f4bf252f3716c14_bf5bf4210c" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>
<!--End mc_embed_signup-->
</span></div></div><div class="blogSocialSection"></div></div><div class="blog-recent"><a class="button" href="/blog/">Recent Posts</a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#catch-em-all">Catch ’Em All</a></li><li><a href="#visualize-em-all">Visualize ’Em all</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="copyright">Copyright © 2020 Félix Luginbühl. All rights reserved.</section></footer></div></body></html>